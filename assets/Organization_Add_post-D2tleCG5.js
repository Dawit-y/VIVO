import{i as S,c as E,d as P,z as i,k as F,e as _,j as e,t as T}from"./index-D056Gisi.js";const q=S.injectEndpoints({endpoints:p=>({createPost:p.mutation({async queryFn({data:d,organization_id:a},{dispatch:b,getState:t},j,c){const{skills:g,availability:y,cover_letter:h,...x}=d,u={skills:g,availability:y,cover_letter:h},n=new FormData;Object.entries(x).forEach(([l,o])=>{o!==void 0&&n.append(l,o)}),n.append("organization",a),d.image&&d.image[0]&&n.append("image",d.image[0]),console.log("form data",n);try{const l=await c({url:"/posts/",method:"POST",body:n});if(l.error)throw new Error("Failed to create post.");const o=l.data.id,m=await c({url:`/posts/${o}/requirements/`,method:"POST",body:u});if(m.error)throw new Error("Failed to add requirements.");return{data:{...l.data,requirements:m.data}}}catch(l){return console.error("Error in createPost:",l),{error:{status:"CUSTOM_ERROR",message:l.message}}}}})})}),{useCreatePostMutation:R}=q,z=5*1024*1024,C=["image/png","image/jpeg","image/webp","image/svg+xml","image/gif"],L=()=>{var x,u,n,l,o,m,v,f,N,w,k;const{organization_id:p}=E(P),d=i.object({title:i.string().min(1,{message:"Title is Required"}),duration:i.string().min(1,{message:"Duration is Required"}),type:i.string().min(1,{message:"Type is Required"}),level:i.string().min(1,{message:"Level is Required"}),category:i.string().min(1,{message:"Category is Required"}),skills_gained:i.string().optional(),description:i.string().optional(),skills:i.boolean().optional(),availability:i.boolean().optional(),cover_letter:i.boolean().optional(),file:i.any().optional().refine(s=>{var r;return(s==null?void 0:s.length)===0||(s==null?void 0:s.length)===1&&C.includes((r=s[0])==null?void 0:r.type)},{message:"Invalid file. Choose a JPEG, PNG, WEBP, SVG, or GIF image"}).refine(s=>{var r;return(s==null?void 0:s.length)===0||(s==null?void 0:s.length)===1&&((r=s[0])==null?void 0:r.size)<=z},{message:"Max file size allowed is 5MB."})}),{register:a,handleSubmit:b,formState:{errors:t}}=F({resolver:T(d),defaultValues:{skills:!1,availability:!1,cover_letter:!1}}),[j,{isLoading:c,isSuccess:g,error:y}]=R();_();const h=async s=>{console.log("data",s);const r=await j({data:s,organization_id:p});r!=null&&r.data&&g?console.log("Post created successfully:",r.data):r.error&&console.error("Error creating post:",r.error)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"px-5 mt-3",children:e.jsx("div",{className:"dark:bg-slate-900 bg-white flex items-center",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"dark:text-slate-100 mb-8 text-2xl font-bold text-center leading-none tracking-tighter text-neutral-600 md:text-3xl lg:text-4xl",children:"Create Internships/Volunteer Works"}),e.jsx("form",{onSubmit:b(h),children:e.jsxs("div",{className:"justify-center mx-auto text-left align-bottom transition-all transform bg-white rounded-lg sm:align-middle mb-2 w-full",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-900",children:"Title"}),e.jsx("input",{type:"text",...a("title"),className:"border-slate-300 peer block min-h-[auto] w-full rounded mb-2",id:"title",placeholder:"Enter Post Title","aria-label":"Post Title"}),t.title&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(x=t.title)==null?void 0:x.message}),e.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-900",children:"Duration"}),e.jsx("input",{type:"text",...a("duration"),className:"border-slate-300 peer block min-h-[auto] w-full rounded",id:"duration",placeholder:"Enter Post Title","aria-label":"Post Title"}),t.duration&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(u=t.duration)==null?void 0:u.message}),e.jsxs("label",{htmlFor:"image",className:"bg-white text-gray-500 font-semibold text-base mt-5 rounded max-w-xlg h-60 p-10 flex flex-col items-center justify-content cursor-pointer border-2 border-gray-300 border-dashed mx-auto font-[sans-serif]",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-11 mb-2 fill-gray-500",viewBox:"0 0 32 32",children:[e.jsx("path",{d:"M23.75 11.044a7.99 7.99 0 0 0-15.5-.009A8 8 0 0 0 9 27h3a1 1 0 0 0 0-2H9a6 6 0 0 1-.035-12 1.038 1.038 0 0 0 1.1-.854 5.991 5.991 0 0 1 11.862 0A1.08 1.08 0 0 0 23 13a6 6 0 0 1 0 12h-3a1 1 0 0 0 0 2h3a8 8 0 0 0 .75-15.956z","data-original":"#000000"}),e.jsx("path",{d:"M20.293 19.707a1 1 0 0 0 1.414-1.414l-5-5a1 1 0 0 0-1.414 0l-5 5a1 1 0 0 0 1.414 1.414L15 16.414V29a1 1 0 0 0 2 0V16.414z","data-original":"#000000"})]}),"Upload Image to be used as a Thumbnail for your Post",e.jsx("input",{id:"image",type:"file",...a("file"),name:"file",className:"hidden"}),e.jsx("p",{className:"text-xs font-medium text-gray-400 mt-2",children:"PNG, JPG, SVG, WEBP, and GIF are allowed."})]}),t.file&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(n=t.file)==null?void 0:n.message}),e.jsxs("div",{className:"flex mt-5 justify-content items-center",children:[e.jsxs("div",{className:"mr-4",children:[e.jsx("label",{className:"mr-3",children:"Type"}),e.jsxs("select",{...a("type"),className:"rounded-md border-2 border-blue-200 py-1.5 pl-3 text-sm font-medium",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Internship",children:"Internship"}),e.jsx("option",{value:"VolunteerWork",children:"Volunteer Work"})]}),t.type&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(l=t.type)==null?void 0:l.message})]}),e.jsxs("div",{className:"mr-4",children:[e.jsx("label",{className:"mr-3",children:"Level"}),e.jsxs("select",{...a("level"),className:"rounded-md border-2 border-blue-200 py-1.5 pl-3 text-sm font-medium",children:[e.jsx("option",{value:"",children:"Select Level"}),e.jsx("option",{value:"Entry",children:"Entry Level"}),e.jsx("option",{value:"Mid",children:"Mid Level"}),e.jsx("option",{value:"Senior",children:"Senior Level"})]}),t.level&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(o=t.level)==null?void 0:o.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mr-3",children:"Category"}),e.jsxs("select",{...a("category"),className:"rounded-md border-2 border-blue-200 py-1.5 pl-3 text-sm font-medium",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Banking",children:"Banking"}),e.jsx("option",{value:"Business",children:"Business"}),e.jsx("option",{value:"Marketing",children:"Marketing"}),e.jsx("option",{value:"Data",children:"Data"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Security",children:"Security"}),e.jsx("option",{value:"Software Engineering",children:"Software Engineering"}),e.jsx("option",{value:"Other",children:"Other"})]}),t.category&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(m=t.category)==null?void 0:m.message})]})]}),e.jsxs("div",{className:"flex-cols justify-content w-full mt-6",children:[e.jsx("label",{className:"mb-10 mt-10",children:"Requirements"}),e.jsxs("label",{htmlFor:"skills",className:"flex cursor-pointer items-start gap-4 mb-4 mt-4 rounded-lg border border-gray-200 p-4 transition hover:bg-gray-50",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",...a("skills"),className:"size-4 rounded border-gray-300",id:"skills"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-medium text-gray-900",children:"Skills"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:"Specify whether you want to inquire about the applicant's skills."})]})]}),t.skills&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(v=t.skills)==null?void 0:v.message}),e.jsxs("label",{htmlFor:"availability",className:"flex cursor-pointer items-start mb-4 gap-4 rounded-lg border border-gray-200 p-4 transition hover:bg-gray-50",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",...a("availability"),className:"size-4 rounded border-gray-300",id:"availability"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-medium text-gray-900",children:"Availability"}),". . .",e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:"Specify whether you want to inquire about the applicant's availability for the position."})]})]}),t.availability&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(f=t.availability)==null?void 0:f.message}),e.jsxs("label",{htmlFor:"cover_letter",className:"flex cursor-pointer items-start gap-4 rounded-lg border border-gray-200 p-4 transition hover:bg-gray-50",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",...a("cover_letter"),className:"size-4 rounded border-gray-300",id:"cover_letter"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-pretty font-medium text-gray-900",children:"Cover Letter"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:"Specify whether you want to inquire about the applicant's motivation for choosing your company."})]})]}),t.cover_letter&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(N=t.cover_letter)==null?void 0:N.message})]}),e.jsxs("div",{className:"relative mt-10 mb-3","data-twe-input-wrapper-init":!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"skills_gained",className:"block text-sm font-medium text-gray-900",children:"Skills Gained"}),e.jsx("textarea",{id:"skills_gained",...a("skills_gained"),className:"mt-2 w-full h-40 rounded-lg border-gray-200 align-top shadow-sm sm:text-sm",rows:2,cols:2,placeholder:"Type skills gained after the post comma separated e.g problem solving, "})]}),t.skills_gained&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(w=t.skills_gained)==null?void 0:w.message})]}),e.jsxs("div",{className:"relative mt-10 mb-3","data-twe-input-wrapper-init":!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-900",children:"Descriptions"}),e.jsx("textarea",{id:"description",...a("description"),className:"mt-2 w-full h-40 rounded-lg border-gray-200 align-top shadow-sm sm:text-sm",rows:"4",placeholder:"Enter the descriptions"})]}),t.description&&e.jsx("span",{className:"text-red-500 text-sm text-bold mt-2",children:(k=t.description)==null?void 0:k.message})]}),e.jsx("div",{className:"z-50 mt-6 rounded-lg",children:e.jsx("button",{type:"submit",className:"items-center w-1/3 mx-auto mt-10 block px-10 py-3.5 text-base font-medium text-center cursor-pointer text-slate-100 transition duration-500 ease-in-out transform border-2 border-white shadow-md rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 bg-indigo-500",disabled:c,children:c?"Submitting...":"Continue to add Tasks"})})]})})]})})})})};export{L as default};
